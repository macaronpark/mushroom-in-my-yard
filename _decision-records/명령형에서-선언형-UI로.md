### 명령형 → 선언형 UI 전환

- 문제
  - UI 렌더링 관련 로직 **유지보수 힘듬**
    - DOM 조작 로직이 장황하고, 전체 코드를 다 인지해야 의도한 UI를 만들 수 있었음
    - 최종 화면을 예측하기 어려움

- 원인
  - 화면 표시를 일일이 명령형으로 조작하는 방식이라 상태와 UI의 대응 관계가 코드 전반에 흩어져 있었음

- 고민한 지점/대안
  1. **변경 시 모든 밭 전체를 다시 렌더링**
     - 장점: 최종 화면 예측이 쉽고 코드 가시성 높음
     - 단점: 노드 수가 많아질수록 불필요한 DOM 변경 증가, 클릭 타이밍과 리렌더링이 겹쳐 이벤트 누락 발생
  2. **변경된 부분(개별 밭)만 다시 렌더링**
     - 장점: DOM 변경 최소화, 성능 효율적
     - 단점: 변경 감지(diff) 로직 구현 필요, 노드 수가 확연히 많아진다면 관련 라이브러리 사용 고려 필요

- 최종 선택
  - 변경된 부분(개별 밭)만 다시 렌더링
    - 밭의 `innerHTML` 문자열 기존 값과 새 값을 비교해서 변경 여부 판단
  - 이유: **성능과 구현 난이도의 균형**이 가장 잘 맞음
    - 완벽한 diff는 아니지만, 노드 100개 이하 규모에서는 충분히 빠르고 단순함
  - 관련 커밋
    - [refactor: 선언형 UI 렌더링](https://github.com/macaronpark/mushroom-in-my-yard/pull/7/commits/5ce4e40ae6cd4dc24e7cc02c56857bff9f07c122)
    - [fix: 개별 밭의 클릭 씹힘 현상이 발생하지 않도록 밭별 렌더링](https://github.com/macaronpark/mushroom-in-my-yard/pull/12/commits/f8fa953b485a4d5b9347adc73bab6b6702235c0a)
    - [test: 테스트 코드에서 UI를 선언형으로 관리](https://github.com/macaronpark/mushroom-in-my-yard/pull/7/commits/457b645a8820051e7934c989a1d55571e6b12f88)

- 배운 점
  - 선언형 UI는 가독성과 유지보수성을 크게 향상시킨다
    - 테스트 코드에서도 선언형으로 UI를 관리하도록 수정함
  - React의 Virtual DOM 도입 배경을 체감
  - (`UI = fn(상태)` 함수형은 신이다)
